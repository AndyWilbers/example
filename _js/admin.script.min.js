String.prototype.count=function(e){var a=this.match(new RegExp(e.toString().replace(/(?=[.\\+*?[^\]$(){}\|])/g,"\\"),"g"));return a?a.length:0},String.prototype.repeat=function(e){return new Array(parseInt(e)+1).join(this)},String.prototype.trim||(String.prototype.trim=function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return this.replace(e,"")}),Array.prototype.indexOf||(Array.prototype.indexOfq=function(e,a){var t;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var r=+a||0;if(1/0===Math.abs(r)&&(r=0),r>=i)return-1;for(t=Math.max(r>=0?r:i-Math.abs(r),0);i>t;){if(t in n&&n[t]===e)return t;t++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Number.prototype.addZeros=function(e){for(var a=this+"";a.length<e;)s="0"+a;return s},window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=window.console.log),window.console.error||(window.console.error=window.console.log),window.console.info||(window.console.info=window.console.log),history.pushParameter=function(e,a,t,n){var i=location.search.trim();if(i.length<1)return void history.pushState(e,a.trim(),"?"+t.trim()+"="+n.trim());var r=i.replace("?","&").indexOf("&"+t.trim()+"=",0);if(0>r)return void history.pushState(e,a.trim(),i+"&"+t.trim()+"="+n.trim());var o=i.indexOf("&",r+1);return 0>o?void history.pushState(e,a.trim(),i.substring(0,r+1)+t.trim()+"="+n.trim()):void history.pushState(e,a.trim(),i.substring(0,r+1)+t.trim()+"="+n.trim()+i.substring(o,i.length-1))};var data={parse:function(e){for(var a=e.split(";"),t={},n=0;n<a.length;++n){var i=a[n].split(":");t[i[0]]=i[1]}return t},stringify:function(e){var a="",t="";return $.each(e,function(n,i){e.hasOwnProperty(n)&&(a+=t+n+":"+i,t=";")}),a}},gen={runFunction:function(e){for(var a=window,t=Array.prototype.slice.call(arguments,1),n=e.split("."),i=n.pop(),r=0;r<n.length;r++)a=a[n[r]];return a[i].apply(a,t)},isSet:function(e){return"undefined"!=typeof e?!0:!1},setDefault:function(e,a){return"undefined"!=typeof e?e:a},sup:{historyState:function(){var e="Browser doesn't support history management.";return history.pushState&&void 0!=window.onpopstate?!0:(window.console.log(e),!1)}},setUrlParameter:function(e,a,t){var e=e.trim(),n=e.indexOf("?",0),i=e.indexOf("#",0);if(0>n&&0>i)return e+"?"+a.trim()+"="+t.trim();var r="";if(i>0){var o=e.split("#");e=o[0],r="#"+o[1]}if(0>n)return e+"?"+a.trim()+"="+t.trim()+r;var s=e.replace("?","&").indexOf("&"+a.trim()+"=",0);if(0>s)return e+"&"+a.trim()+"="+t.trim()+r;var l=e.indexOf("&",s+1);return 0>l?e.substring(0,s+1)+a.trim()+"="+t.trim()+r:e.substring(0,s+1)+a.trim()+"="+t.trim()+e.substring(l,e.length-1)+r},getUrlParameter:function(e,a,t){var n=e.trim();n=n.replace("?","&"),n=n.replace("#","&");var i="&"+a.trim()+"=",r=n.indexOf(i,0);if(0>r)return gen.isSet(t)?t:!1;var o=r+i.length,s=n.indexOf("&",o);return 0>s?n.substring(o).trim():n.substring(o,s).trim()},deleteUrlParameter:function(e,a){var e=e.trim(),t=e.replace("?","&");t=t.replace("#","&");var n="&"+a.trim()+"=",i=t.indexOf(n,0);if(0>i)return e;var r=(i+n.length,t.indexOf("&",i+1)),o=e.substring(0,i).trim();return r>0&&(o+=e.substring(r).trim()),o},timestamp:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()},preventDefault:function(e){e.preventDefault()},dataLog:function(e){window.console.log(JSON.stringify(e))},dataAlert:function(e){alert(JSON.stringify(e))},find_max_val:function(e){var a=null;return 0==$(e).size()?null:($(e).each(function(){if(null===a)a=parseInt($(this).val(),10);else{var e=parseInt($(this).val(),10);a=e>a?e:a}}),a)},find_min_val:function(e){var a=null;return 0==$(e).size()?null:($(e).each(function(){if(null===a)a=parseInt($(this).val(),10);else{var e=parseInt($(this).val(),10);a=a>e?e:a}}),a)},ajax:function(e){return this.p={root:gen.setDefault(e.trim()+"/","")},this.get=function(e){e.data.hasOwnProperty("me")&&delete e.data.me,e.data.url=e.url;var a={data:gen.setDefault(e.data,{}),callback:gen.setDefault(e.callback,"#DEFAULT#")};$.ajax({url:"front.php",type:"GET",data:a.data,dataType:"json",cache:!1,success:function(t){if("#SKIP#"!==a.callback){if("#DEFAULT#"===a.callback)return window.console.log("Respons from:'"+e.url+"':"),window.console.log("inputData: "+JSON.stringify(a.data)),void window.console.log("responsData: "+JSON.stringify(t));gen.isSet(t.meta.error)&&parseInt(t.meta.error,10)<0&&(window.console.error("Request to '"+e.url+"' returned an error, "),window.console.error("input :"+JSON.stringify(a.data)),window.console.log("responsData: "+JSON.stringify(t))),t.inputData=a.data,gen.runFunction(a.callback.trim(),t)}},error:function(t){window.console.error("Ajax request to '"+e.url+"' failed, input:"),window.console.error(JSON.stringify(a.data)),window.console.error("Debug info:"),window.console.error(t.responseText)}})},this.post=function(e){e.data.hasOwnProperty("me")&&delete e.data.me,e.data.url=e.url;var a={data:gen.setDefault(e.data,{}),callback:gen.setDefault(e.callback,"#NONE#")};$.ajax({url:"front.php",type:"POST",data:a.data,dataType:"json",cache:!1,success:function(t){"#NONE#"!==a.callback&&(gen.isSet(t.meta.error)&&parseInt(t.meta.error,10)<0&&(window.console.error("Request to '"+e.url+"' returned an error, "),window.console.error("input :"+JSON.stringify(a.data)),window.console.log("responsData: "+JSON.stringify(t))),t.inputData=a.data,gen.runFunction(a.callback.trim(),t))},error:function(t){window.console.error("Ajax request to '"+e.url+"' failed, input:"),window.console.error(JSON.stringify(a.data)),window.console.error("Debug info:"),window.console.error(t.responseText)}})},this}};$(document).ready(function(){$(document).on("click",'[href*="ajax/"]',function(e){e.preventDefault();var a=$(this).attr("href").split("/"),t="requests."+a.pop();gen.runFunction(t,$(this))}),$(document).on("click",'[data-sa*="ajax:"]',function(e){e.preventDefault();var a=sa.dataSA($(this).attr("data-sa"));gen.runFunction(a.ajax,$(this))})});var requests={imagesize:function(e){var a=new gen.ajax(""),t=e.hasClass("lr")?"lr":"normal";a.post({url:e.attr("href"),data:{status:t},callback:"requests.imagesize_callback"})},imagesize_callback:function(e){"lr"===e.status?$("#btn-imagsize").addClass("lr"):$("#btn-imagsize").removeClass("lr");var a=$("#btn-imagsize").attr("title");$("#btn-imagsize").attr("title",$("#btn-imagsize").attr("data-title")),$("#btn-imagsize").attr("data-title",a)},device:function(e){var a=new gen.ajax(""),t=e.hasClass("mobile")?"mobile":"desktop";a.post({url:e.attr("href"),data:{status:t},callback:"requests.device_callback"})},device_callback:function(e){window.console.log("calback"),window.console.log(JSON.stringify(e)),"mobile"===e.status?$("#btn-device").addClass("mobile"):$("#btn-device").removeClass("mobile");var a=$("#btn-device").attr("title");$("#btn-device").attr("title",$("#btn-device").attr("data-title")),$("#btn-device").attr("data-title",a),$('[data-sa*="show:device;"]').toggleClass("hide")}};$(document).ready(function(){ce.bind()});var ce={bind:function(){ce.radio.bind(),ce.check.bind()},data:function(e){for(var a=e.split(";"),t={},n=0;n<a.length;++n){var i=a[n].split(":");t[i[0]]=i[1]}return t},radio:{bind:function(){$(document).on("click taphold",".ce-radio",function(){var e=ce.data($(this).attr("data-ce"));$(this).hasClass("no-default")&&$(this).hasClass("checked")?$(this).removeClass("checked"):($('[data-ce*="name:'+e.name+';"]').removeClass("checked"),$(this).addClass("checked"))})},val:function(e){if($radioChecked=$('[data-ce*="name:'+e+';"].checked'),0==$radioChecked.size())return null;var a=ce.data($radioChecked.attr("data-ce"));return a.value}},check:{bind:function(){$(document).on("click",".ce-check",function(){$(this).toggleClass("checked")}),$(document).on("taphold",".ce-check",function(){$(this).toggleClass("checked")})},val:function(e){$checked=$('[data-ce*="name:'+e+';"].checked');var a=new Array;return $($checked).each(function(){var e=ce.data($(this).attr("data-ce"));-1===a.indexOf(e.value)&&a.push(e.value)}),a}}};$(document).ready(function(){$(document).on("submit",'form[data-sa*="submit:off;"]',function(e){e.preventDefault()}),$(document).on("click",'[data-sa*="onClick:"]',function(e){e.preventDefault();var a=sa.dataSA($(this).attr("data-sa"));a.me=$(this),gen.runFunction(a.onClick,a)}),$(document).on("change",'[data-sa*="onChange:"]',function(){var e=sa.dataSA($(this).attr("data-sa"));e.me=$(this),gen.runFunction(e.onChange,e)})});var sa={data:function(e){return sa.dataSA(e)},dataSA:function(e){for(var a=e.split(";"),t={},n=0;n<a.length;++n){var i=a[n].split(":");t[i[0]]=i[1]}return t},getFieldsByGroup:function(e){var a={},e=$('[data-sa*="group:'+e+'"]');return 0==e.size()?a:($(e).each(function(){var e=fe.dataSA($(this).attr("data-sa"));e.hasOwnProperty("data-field")&&(a[e["data-field"]]=fe.getValue($(this)))}),a)},getValue:function(e){var a=$(e).attr("type"),t=fe.dataSA($(e).attr("data-sa"));switch(t.hasOwnProperty("type")&&(a=t.type),a){case"radio":var n=$(e).attr("name");return $('[name="'+n+'"]').filter('[checked="checked"]').val();case"html":return $(e).html();default:return $(e).val()}},checkOnPattern:function(e){if(1!==$(e).filter("[pattern]").size())return!0;if(""==$(e).val())return!0;$(e).removeClass("pass").removeClass("fail");var a=$(e).attr("pattern"),t=new RegExp(a);return $(e).val().match(t)?($(e).addClass("pass"),!0):($(e).addClass("fail"),!1)},checkAllRequired:function(e){var a=!0;return $('[data-sa*="group:'+e+'"]').filter(".required").each(function(){$(this).removeClass("pass"),$(this).removeClass("fail"),""==$(this).val()?($(this).addClass("fail"),a=!1):fe.checkOnPattern(this)?$(this).addClass("pass"):($(this).addClass("fail"),a=!1)}),a}};$(document).ready(function(){});var monitor={setDebuglevel:function(){var e=new gen.ajax("");e.post({url:"monitor/ajax/setdebuglevel",data:{level:ce.radio.val("debuglevel")}})}};$(document).ready(function(){article.editor.setup()});var article={save_callback:function(e){var a=$("#"+e.form_id);return e.meta.error<0?(a.find(".msg").text(e.meta.msg).addClass("warning").slideDown(tan),void(e.hasOwnProperty("field_warning")&&a.find('[name="'+e.field_warning+'"]').addClass("warning"))):(form.data.remove(a),void(window.location.href=e.redirect))},editor:{setup:function(){1==$("#content").size()&&($(document).on("click",'[data-sa^="popup:"]',function(){var e=sa.data($(this).attr("data-sa")),a={};a.popup=e.popup,a.action_ok="article.editor.get_link;type:"+e.popup+";";var t=new gen.ajax(""),n=sa.dataSA($("html").attr("data-sa"));a.image_path=n.path;var i="VBNE"==n.application?"article/ajax/get_popup":n.application+"/article/ajax/get_popup";t.get({url:i,data:a,callback:"article.editor.popup_show"})}),$(document).on("click","#image_selector .thumb",function(){$("#popup").addClass("ui-closed");var e=parseInt($(this).attr("data-id"),10);if(1>e)return void alert("Afbeelding kan niet worden toegevoeg.");var a={};a.ID=e;var t=new gen.ajax(""),n=sa.dataSA($("html").attr("data-sa")),i="VBNE"==n.application?"image/ajax/get_image":n.application+"/image/ajax/get_image";t.get({url:i,data:a,callback:"article.editor.insert_image"})}))},popup_open:function(){var e=sa.data($(this).attr("data-sa")),a={};a.popup=e.popup,a.action_ok="article.editor.get_link;type:"+e.popup+";";var t=new gen.ajax(""),n=sa.dataSA($("html").attr("data-sa"));a.image_path=n.path;var i="VBNE"==n.application?"article/ajax/get_popup":n.application+"/article/ajax/get_popup";t.get({url:i,data:a,callback:"article.editor.popup_show"})},get_node_attr:function(){var e=tinymce.activeEditor.selection.getNode();if(!e.hasAttributes())return{};for(var a={},t=e.attributes,n=t.length-1;n>=0;n--)a[t[n].name]=t[n].value;return a},insert_image:function(e){if(parseInt(e.meta.error,10)<0)return"on"==debug&&window.console.error(JSON.stringify(e)),void alert("Afbeelding kan niet worden toegevoeg.");window.console.info("image record:"),window.console.log(JSON.stringify(e.record));var a=sa.data($("html").attr("data-sa")),t=a.path+"_img/";t+=a.application.toLowerCase()+"/img/",t+="/"==e.record.dir?"":e.record.dir,t+="img"+e.record.ID+"."+e.record.type,window.console.log("src: "+t);var n=null==e.record.alt?"":e.record.alt;window.console.log("alt: "+n);var i=tinymce.activeEditor.selection.getNode(),r=i.nodeName;if("IMG"==r.toUpperCase())i.setAttribute("src",t),i.setAttribute("alt",n),i.setAttribute("data-image-id",e.record.ID);else{var o=tinymce.activeEditor.selection,s=o.getContent(),l='<img data-image-id="'+e.record.ID+'" src="'+t+'" alt="'+n+'" />';window.console.log("img: "+l),o.setContent(s+l)}},popup_show:function(e){return parseInt(e.meta.error,10)<0?void("on"==debug&&window.console.error(JSON.stringify(e))):($("#box-content").html(e.html),"large"==e.size?$("#popup").addClass("large"):$("#popup").removeClass("large"),void $("#popup").removeClass("ui-closed"))},get_link:function(e){$("#popup").addClass("ui-closed");var a=e.type,t=$("#record").find('option[selected="selected"]').val(),n=tinymce.activeEditor.selection,i={};i.ID=t,i.type=a,i.text=n.getContent();var r=new gen.ajax(""),o=sa.dataSA($("html").attr("data-sa")),s="VBNE"==o.application?"article/ajax/get_link":o.application+"/article/ajax/get_link";r.get({url:s,data:i,callback:"article.editor.insert_link"})},insert_link:function(e){if(window.console.info("insert link:"),parseInt(e.meta.error,10)<0)return"on"==debug&&window.console.error(JSON.stringify(e)),void alert(e.meta.msg);var a=tinymce.activeEditor.selection.getNode(),t=a.nodeName;if("A"==t.toUpperCase())a.setAttribute("href",e.record.href),a.setAttribute("title",e.record.title),a.setAttribute("target",e.target),a.setAttribute("data-link-id",e["data-link-id"]);else{var n=tinymce.activeEditor.selection;n.setContent(e.html)}}}};$(document).ready(function(){$(document).on("click","#images .thumb",function(e){var a=$("#image_selector .thumb"),t=a.index($(this)),n="#none";if(e.shiftKey){if("#none"!=$("#image_selector").attr("data-shift")){n=parseInt($("#image_selector").attr("data-shift"),10);var i=n>t?t:n,r=t>=n?t:n;return r++,e.shiftKey&&a.slice(i,r).addClass("selected"),void $("#image_selector").attr("data-shift",t)}return $(this).addClass("selected"),void $("#image_selector").attr("data-shift",t)}return $("#image_selector").attr("data-shift","#none"),e.altKey?void $(this).toggleClass("selected"):void $(this).toggleClass("selected").siblings().removeClass("selected")}),$(document).on("click","#toggle_view",function(){var e={};e.type=$("#image_selector_view").attr("data-type");var a=new gen.ajax(""),t=sa.dataSA($("html").attr("data-sa")),n="VBNE"==t.application?"image/ajax/toggle_view":t.application+"/image/ajax/toggle_view";a.get({url:n,data:e,callback:"image.toggle_view"})}),$(document).on("click","#save_alt",function(){var e=$("#image_selector_view").find('input[name^="ID"].changed');if(0!=e.size()){var a={};e.each(function(){var e=$(this).attr("name"),t=$(this).val();a[e]=t});var t={};t.records=JSON.stringify(a);var n=new gen.ajax(""),i=sa.dataSA($("html").attr("data-sa")),r="VBNE"==i.application?"image/ajax/save_alt":i.application+"/image/ajax/save_alt";n.post({url:r,data:t,callback:"image.save_alt"})}}),$(document).on("click","#popup_dir_new .btn",function(){var e=$("#popup_dir_new").find('input[name="name"]').val(),a={};a.name=e;var t=new gen.ajax(""),n=sa.dataSA($("html").attr("data-sa")),i="VBNE"==n.application?"image/ajax/new_dir":n.application+"/image/ajax/new_dir";t.post({url:i,data:a,callback:"image.new_dir"})}),$(document).on("click","#popup_image_move .btn",function(){var e=$("#popup_image_move").find('option[selected="selected"]').attr("value"),a=$("#image_selector_view").find("[data-id].thumb.selected");if(a.size()<1)return $("#msg").html("<p>Er zijn geen afbeeldingen geselecteerd.</p>"),void $("#popup").addClass("ui-closed");var t=[];a.each(function(){t.push($(this).attr("data-id")),$(this).addClass("hide")});var n={};n.dir=e,n.records=JSON.stringify(t);var i=new gen.ajax(""),r=sa.dataSA($("html").attr("data-sa")),o="VBNE"==r.application?"image/ajax/move":r.application+"/image/ajax/move";i.post({url:o,data:n,callback:"image.move"})})});var image={toggle_view:function(e){if(parseInt(e.meta.error,10)<0)return void("on"==debug&&window.console.error(JSON.stringify(e)));var a=e.type;$("#image_selector_view").html(e.html).attr("data-type",e.type).attr("data-shift","#none"),form.data.load_named_objects($("#images"));var t=$("#toggle_view").text(),n=$("#toggle_view").attr("title");$("#toggle_view").text($("#toggle_view").attr("data-text")),$("#toggle_view").attr("title",$("#toggle_view").attr("data-title")),$("#toggle_view").attr("data-text",t),$("#toggle_view").attr("data-title",n),"thumbs"==a?$("#save_alt").addClass("hidden"):$("#save_alt").removeClass("hidden")},save_alt:function(e){return parseInt(e.meta.error,10)<0?("on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning")):($.each(e.records,function(e,a){$("#image_selector_view").find('input[name="'+e+'"]').val(a).removeClass("changed"),form.data.unset($("#images"),e)}),void $("#msg").html(e.meta.msg).removeClass("warning"))},new_dir:function(e){return parseInt(e.meta.error,10)<0?("on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning")):void document.location.reload(!0)},move:function(e){return parseInt(e.meta.error,10)<0?("on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning")):void document.location.reload(!0)}};$(document).ready(function(){$(document).on("click","#new-account",user.new_account),$(document).on("click","#password-reset",user.password_reset),$(document).on("click",'[data-ce*="name:showName;"]',user.toggle_show_name),$(document).on("taphold",'[data-ce*="name:showName;"]',user.toggle_show_name),$(document).on("click",'[data-ce*="name:shareObservations;"]',user.toggle_share_observations),$(document).on("taphold",'[data-ce*="name:shareObservations;"]',user.toggle_share_observations),$(document).on("click","#delete",user.delete_account),$(document).on("submit",'[action="save_my_observation"]',user.save_my_observation),$(document).on("submit",'[action="save_my_report"]',user.save_my_report),$(document).on("click",'[data-sa*="remove"]',user.remove)});var user={my_account_save_callback:function(e){window.console.info("user.my_account_save_callback"),window.console.info(JSON.stringify(e));var a=$("#"+e.inputData.form_id);window.console.info(a.size()),e.meta.error<0?(a.find(".msg").addClass("warning"),e.hasOwnProperty("field_warning")&&a.find('[name="'+e.field_warning+'"]').addClass("warning")):(form.data.remove(a),a.find(".changed").removeClass("changed")),a.find(".msg").text(e.meta.msg),a.find(".msg").slideDown(tan)},new_account:function(e){e.preventDefault(),window.console.info("new-account"),$("#login").attr("action","registatie"),$("#login").trigger("submit")},delete_account:function(e){e.preventDefault(),window.console.info("delete");var a=confirm("Verwijderen van het account kan niet ongedaan worden, door op OK te klikken vewijdert u uw account definitief.");if(0!=a){var t=$(this).attr("href");$("#my-account-ar").attr("action",t),$("#my-account-ar").trigger("submit")}},password_reset:function(e){e.preventDefault(),window.console.info("password-reset"),$("#login").attr("action","password_reset_request"),$("#login").trigger("submit")},toggle_show_name:function(){var e=$(this).hasClass("checked")?1:-1;$("#showName").val(e)},toggle_share_observations:function(){var e=$(this).hasClass("checked")?1:-1;$("#shareObservations").val(e)},save_my_observation:function(e){e.preventDefault();var a={};a.name=$("#name").val(),window.console.info("data.name: "+a.name),a.ID=$("#ID").val(),window.console.info("data.ID: "+a.ID),a.date=$("#date").val(),window.console.info("data.date: "+a.date);var t=new Array;$('[data-ce*="name:user;"].checked').size()>0&&($('[data-ce*="name:user;"].checked').each(function(){var e=sa.data($(this).attr("data-ce"));t.push(e.ID)}),a.viewers=JSON.stringify(t),window.console.info("data.viewers: "+a.viewers));var n=new gen.ajax(""),i=sa.dataSA($("html").eq(0).attr("data-sa"));if("VBNE"==i.application)return void alert("Deze functie kan niet worden uitgevoerd.");var r=i.application+"/ajax/observation_set_save_meta";n.post({url:r,data:a,callback:"user.observation_set_save_meta_callback"})},observation_set_save_meta_callback:function(e){if(parseInt(e.meta.error,10)<0)return"on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning");var a=sa.dataSA($("html").attr("data-sa"));url=a.path+a.application+"/my_observations",location.assign(url)},save_my_report:function(e){e.preventDefault();var a={};a.name=$("#name").val(),a.ID=$("#ID").val();var t=new Array;$('[data-ce*="name:user;"].checked').size()>0&&($('[data-ce*="name:user;"].checked').each(function(){var e=sa.data($(this).attr("data-ce"));t.push(e.ID)}),a.viewers=JSON.stringify(t),window.console.info("data.viewers: "+a.viewers));var n=new gen.ajax(""),i=sa.dataSA($("html").eq(0).attr("data-sa"));if("VBNE"==i.application)return void alert("Deze functie kan niet worden uitgevoerd.");var r=i.application+"/ajax/report_set_save_meta";n.post({url:r,data:a,callback:"user.report_set_save_meta_callback"})},report_set_save_meta_callback:function(e){if(parseInt(e.meta.error,10)<0)return"on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning");var a=sa.dataSA($("html").attr("data-sa"));url=a.path+a.application+"/my_reports",location.assign(url)},remove:function(e){e.preventDefault();var a=confirm("Verwijderen kan niet ongedaan worden, door op OK te klikken vewijdert u definitief.");if(0!=a){var t={},n=sa.data($(this).attr("data-sa"));t.ID=n.id,t.ext=n.remove;var i=new gen.ajax(""),r=sa.dataSA($("html").eq(0).attr("data-sa")),o=r.application+"/ajax/remove_set";i.post({url:o,data:t,callback:"user.remove_callback"})}},remove_callback:function(e){if(parseInt(e.meta.error,10)<0)return"on"==debug&&window.console.error(JSON.stringify(e)),void $("#msg").html(e.meta.msg).addClass("warning");var a=sa.dataSA($("html").attr("data-sa"));url=a.path+a.application+"/"+e.page,location.assign(url)}},form={setup:function(){if("on"==debug){var e=window.location.href;if(e=e.toLowerCase(),e.indexOf("?clean")>0||e.indexOf("&clean")>0){var a=confirm("Alle data verwijderen?");a&&form.data.clear()}(e.indexOf("?show")>0||e.indexOf("&show")>0||"on"===show)&&(window.console.info("All local storage:"),window.console.info(JSON.stringify(localStorage)))}$(document).on("change","input[pattern]",function(e){e.preventDefault(),form.check_pattern($(this))}),$(document).on("change","input[required]",function(e){e.preventDefault(),form.check_required($(this))}),$(document).on("submit",'form[id]:not([data-sa*="submit"])',function(e){e.preventDefault();var a={};a.form_id=$(this).attr("id"),$.each($(this).serializeArray(),function(e,t){a[t.name]=$('input[name="'+t.name+'"][data-default*="NULL"], input[name="'+t.name+'"][data-default*="null"]').size()>0&&""==t.value?"NULL":t.value}),$(this).find('[data-ce*="type:radio;"].checked').each(function(){var e=ce.data($(this).attr("data-ce"));a[e.name]=e.value});var t=1===$(this).find(".publish").size()?$(this).find(".publish"):null;if(null!==t&&(a.publish=t.hasClass("not")?-1:1),"on"==debug){var n=window.location.href;n=n.toLowerCase(),n.indexOf("?show")>0||n.indexOf("&show")>0||"on"===show}var i=new gen.ajax("");i.post({url:$(this).attr("action"),data:a,callback:$(this).attr("data-callback")})}),$(document).on("click",'form[id] [data-sa="reload"]',form.reload),$("form[id]").each(function(){{var e=$(this).attr("id");form.data.get($(this))}$(document).on("keypress","#"+e+" input",function(e){var a=e.keyCode?e.keyCode:e.which;if(13==a){e.preventDefault();var t=$(this).closest("form").find(':input[type="text"]'),n=t.index(this)<t.size()-1?t.index(this)+1:0;t.eq(n).focus()}}),form.data.load_named_objects($(this)),$(document).on("change","#"+e+' input[type="text"], #'+e+' input[type="hidden"], #'+e+" select, #"+e+" textarea",form.local_storage),$(document).on("click","#"+e+' [data-ce*="type:radio;"]',form.local_storage)}),$(document).on("click",'a[data-sa*="change-positions"] ',function(e){e.preventDefault();var a=$(this),t=sa.dataSA(a.attr("data-sa"));a.addClass("hide"),$('ul[data-sa="'+t.ul+'"]').toggleClass("hide");var t=sa.dataSA(a.attr("data-sa"));$("#"+t.toggle_by_id).slideToggle(tan)}),$(document).on("click",'a[data-sa*="-add"] ',function(e){e.preventDefault();var a=$(this);a.addClass("hide");var t=sa.dataSA(a.attr("data-sa"));$("#"+t.toggle_by_id).slideToggle(tan)});var t=sa.data($("html").attr("data-sa"));window.hasOwnProperty("tinymce")&&tinymce.init({schema:"html5",content_css:t.path+"_css/style.min.css?"+(new Date).getTime(),selector:'textarea[name="content"]',plugins:"code table link",toolbar:["undo redo | cut copy  paste | styleselect formatselect removeformat bold italic | table | removeformat code","alignleft aligncenter alignright | bullist  numlist outdent indent | link "],style_formats:[{title:"figuur",block:"p",classes:"figuur"},{title:"img-frame",block:"p",classes:"img-frame"},{title:"icon help",block:"p",classes:"icon help"},{title:"icon account",block:"p",classes:"icon account"},{title:"icon account logedin",block:"p",classes:"icon account logedin"},{title:"icon imagsize",block:"p",classes:"icon imagsize"},{title:"icon imagsize lr",block:"p",classes:"icon imagsize lr"},{title:"icon reset",block:"p",classes:"icon reset"},{title:"icon settings",block:"p",classes:"icon settings"},{title:"icon showmenu",block:"p",classes:"icon showmenu"},{title:"icon location",block:"p",classes:"icon location"},{title:"icon device",block:"p",classes:"icon device"},{title:"icon device mobile",block:"p",classes:"icon device mobile"}],menu:{},setup:function(e){e.on("change",function(){$('label[for="content"]').addClass("changed"),$('textarea[name="content"]').val(e.getContent()),$('textarea[name="content"]').trigger("change")}),$('textarea[name="content"]').hasClass("changed")&&$('label[for="content"]').addClass("changed")}}),$(document).on("click",".btn.warning",function(){$(this).removeClass("warning")})},local_storage:function(e){if(!$(this).hasClass("publish")){e.preventDefault();var a=$(this).parents("form"),t=this.nodeName.toLowerCase(),n={};1==$(this).filter("[data-ce]").size()&&(n=ce.data($(this).attr("data-ce")),t=n.type);var i=null,r=null;switch(t){case"radio":i=n.name,r=$(this).hasClass("checked")?n.value:null,$('[data-ce*="name:'+i+';"]').addClass("changed");break;case"input":case"select":case"textarea":i=$(this).attr("name"),r=$(this).val(),$(this).addClass("changed");break;default:t=null}null!==t&&(form.data.set(a,i,r),a.find(".msg").removeClass("warning").text("").slideUp(tan))}},reload:function(e){e.preventDefault();var a=confirm("Alle aanpassingen ongedaan maken?");if(1==a){var t=$(this).parents("form");form.data.remove(t),window.location.reload(!0)}},save_category:function(e){var a=$("#"+e.form_id);return e.meta.error<0?(a.find(".msg").text(e.meta.msg).addClass("warning").slideDown(tan),void(e.hasOwnProperty("field_warning")&&a.find('[name="'+e.field_warning+'"]').addClass("warning"))):(form.data.remove(a),void("on"===no_redirect?window.console.log(JSON.stringify(e)):window.location.href=e.redirect))},add_record:function(e){"on"==debug&&(window.console.info("form.add_record:"),window.console.info(JSON.stringify(e)));var a=$("#"+e.form_id);return e.meta.error<0?(window.console.error(e.meta.msg),a.find(".msg").html(e.meta.msg).addClass("warning").slideDown(tan),e.hasOwnProperty("field_warning")&&a.find('[name="'+e.field_warning+'"]').addClass("warning"),void(e.hasOwnProperty("error_field")&&(window.console.error(e.error_field),$('[name="'+e.error_field+'"], .btn[data-sa*="'+e.error_field+'"]').addClass("warning")))):(form.data.remove(a),void(window.location.href=e.redirect))},change_positions:function(e){var a=$("#"+e.form_id);return e.meta.error<0?(window.console.log(a.size()),a.find(".msg").text(e.meta.msg).addClass("warning").slideDown(tan),void(e.hasOwnProperty("field_warning")&&a.find('[name="'+e.field_warning+'"]').addClass("warning"))):(form.data.remove(a),void(window.location.href=e.redirect))},check_pattern:function(e){var a=e.attr("pattern");"on"===debug&&window.console.log("pattern: "+a);var t=new RegExp(a);return t.test(e.val())?(e.removeClass("warning"),!0):(e.addClass("warning"),!1)},check_required:function(e){var a=e.val();return a=a.trim(),a.length>0?(e.removeClass("warning"),!0):(e.addClass("warning"),!1)},data:{key:function(e){var a=e.attr("id");return 1==e.find('input[type="hidden"][name="PARENT_ID"]').size()&&(a+=e.find('input[type="hidden"][name="PARENT_ID"]').val()),1==e.find('input[type="hidden"][name="FID_CAT"]').size()&&(a+=e.find('input[type="hidden"][name="FID_CAT"]').val()),a+=e.find('input[type="hidden"][name="ID"]').val()},set:function(e,a,t){var n=form.data.key(e),i=null===localStorage.getItem(n)?{}:JSON.parse(localStorage.getItem(n));return i[a]=t,localStorage.setItem(n,JSON.stringify(i)),i},unset:function(e,a){var t=form.data.key(e),n=form.data.get(e);n.hasOwnProperty(a)&&delete n[a];var i={};return JSON.stringify(n)!=JSON.stringify(i)?(localStorage.setItem(t,JSON.stringify(n)),n):JSON.stringify(n)==JSON.stringify(i)?(form.data.remove(e),{}):n},get:function(e){var a=form.data.key(e);return null===localStorage.getItem(a)?{}:JSON.parse(localStorage.getItem(a))},remove:function(e){var a=form.data.key(e);localStorage.removeItem(a);var t=e.siblings('a[data-sa*="change-positions"]');if(t.size()>0){t.removeClass("hide");var n=sa.dataSA(t.attr("data-sa"));$('ul[data-sa="'+n.ul+'"]').removeClass("hide"),e.siblings('a[data-sa*="-add"]').removeClass("hide"),e.hasClass("ui-closed")&&e.slideUp(tan)}},clear:function(){localStorage.clear()},loadform:function(e){window.console.info(JSON.stringify(e));var a=$("#"+e.form_id);return 1!==a.size()?void window.console.error("form_id: "+e.form_id+" is not found."):(a.find(".new").remove(),0!=e.meta.error?(window.console.error("Error"+e.meta.error),void a.find(".msg").addClass("warning").text(e.meta.msg).slideDown(tan)):(a.find('input[type="text"][name], select[name], textarea[name]').each(function(){var a=1==$(this).filter("[type]").size()?$(this).attr("type"):null;switch(a){case null:if($(this).is("select")){var t="new"==e.ID?-1:e.ar[$(this).attr("name")];if(t=null==t?-1:t,$(this).val(t),-1==t){var n=$(this).attr("name");$('[data-sa="'+n+'"]').html("").addClass("ui-closed")}}break;default:var t="new"==e.ID?"":e.ar[$(this).attr("name")];$(this).val(t),$(this).is("textarea")&&$(this).text(t)}}),a.find("[data-ce]").each(function(){if(dataCE=ce.data($(this).attr("data-ce")),e.ar.hasOwnProperty(dataCE.name)){var a=e.ar[dataCE.name];switch(dataCE.type){case"radio":dataCE.value==a&&$(this).trigger("click")}}}),window.hasOwnProperty("tinymce")&&null!=tinymce.activeEditor&&tinymce.activeEditor.setContent(e.ar.content),form.data.remove(a),a.find(".changed").removeClass("changed"),void a.find(".warning").removeClass("warning")))},load_named_objects:function(e){var a=form.data.get(e);$.each(e.find("[name]"),function(){var e=$(this).attr("name");a.hasOwnProperty(e)&&($(this).val(a[e]),$(this).addClass("changed"),this.hasAttribute("required")&&form.check_required($(this)),this.hasAttribute("pattern")&&form.check_pattern($(this)))}),$.each(e.find("[data-ce]"),function(){dataCE=ce.data($(this).attr("data-ce"));var e=null;if(a.hasOwnProperty(dataCE.name))switch(e=a[dataCE.name],dataCE.type){case"radio":dataCE.value==e?($(this).hasClass("checked")||$(this).trigger("click"),$(this).addClass("checked")):$(this).removeClass("checked"),$(this).addClass("changed")}}),$.each(a,function(e){$('[data-sa="'+e+'"]').size()>0&&$.each($('[data-sa="'+e+'"]'),function(){$('[name="'+e+'"]').trigger("change")})})}}};$(document).ready(function(){$(document).on("click","#btn-help",admin.toggle_help),$(document).on("change",'select[name="FID_ARTICLE_CAT"]',admin.reset_fid_article),$(document).on("click",".btn.slide[data-sa]",function(e){e.preventDefault();
var a=$(this).attr("data-sa");$('.slide-container[data-sa="'+a+'"]').slideToggle(tan);var t=$(this).attr("title");$(this).attr("title",$(this).attr("data-title")),$(this).attr("data-title",t),$(this).toggleClass("up")}),$(document).on("click","[data-popup]",function(){window.console.info($(this).attr("data-popup"));var e=$("#"+$(this).attr("data-popup"));1==parseInt(e.size(),10)&&(e.removeClass("ui-closed").siblings("[id]").addClass("ui-closed"),$("#popup").removeClass("ui-closed"))}),$(document).on("click","#popup>.btn.close",function(e){e.preventDefault(),$("#popup").addClass("ui-closed")}),$(document).on("change","#popup select",function(){var e=$(this).find('option[value="'+$(this).val()+'"]');e.attr("selected","selected").siblings("option").removeAttr("selected")}),$(document).on("click","#image_selector  a",function(e){e.preventDefault();var a=new gen.ajax(""),t={};t.dir=$(this).attr("href");var n=sa.dataSA($("html").attr("data-sa"));t.image_path=n.path;var i="VBNE"==n.application?"image/ajax/get_selector":n.application+"/image/ajax/get_selector";a.get({url:i,data:t,callback:"admin.update_image_selector"})}),$(document).on("change","#image_selector *",function(){$("#msg").removeClass("warning").html("")}),$(document).on("click","#image_selector *",function(){$("#msg").removeClass("warning").html("")})});var admin={toggle_publish:function(e){"on"===debug&&(window.console.info("admin.toggle_publish data:"),window.console.info(JSON.stringify(e)));var a=new gen.ajax("");a.post({url:"ajax/toggle_publish",data:e,callback:"admin.toggle_publish_callback"})},toggle_publish_callback:function(e){if("on"===debug&&(window.console.info("admin.toggle_publish_callback:"),window.console.info(JSON.stringify(e))),0==e.meta.error){var a=e.inputData.onClick,t=e.inputData.name,n=e.inputData.id;$('[data-sa*="onClick:'+a+';"][data-sa*="name:'+t+';"][data-sa*="id:'+n+';"]').toggleClass("not")}},toggle_help:function(e){e.preventDefault();var a=$(this);$("#help").slideToggle(tan,function(){var e=a.attr("title");a.attr("title",a.attr("data-title")),a.attr("data-title",e)})},toggle_by_id:function(e){e.preventDefault();var a=$(this),t=sa.dataSA(a.attr("data-sa"));$("#"+t.toggle_by_id).slideToggle(tan,function(){var e=a.attr("title"),t=a.text();a.text(a.attr("data-label")),a.attr("data-label",t),a.attr("title",a.attr("data-title")),a.attr("data-title",e)})},reset_fid_article:function(){var e=new gen.ajax(""),a=sa.dataSA($("html").attr("data-sa")),t={};t.FID_ARTICLE_CAT=$(this).val();var n="VBNE"==a.application?"article/options":a.application+"/article/options";e.get({url:n,data:t,callback:"admin.update_article_options"})},update_article_options:function(e){window.console.info("update_article_options"),parseInt(e.meta.error,10)<0?"on"==debug&&window.console.error(JSON.stringify(e)):($('[data-sa="FID_ARTICLE_CAT"]').html(e.select),$('select[name="FID_ARTICLE"]').val(-1).trigger("change"),""==e.select?$('[data-sa="FID_ARTICLE_CAT"]').addClass("ui-closed"):$('[data-sa="FID_ARTICLE_CAT"]').removeClass("ui-closed"))},update_record_selector:function(e){e.hasOwnProperty("name")||"on"==debug&&window.console.error("update_record_selector: data-sa[name] is not defined.");var a=e.me,t=a.val();window.console.log("update_record_selector:"),window.console.info("name: "+e.name),window.console.info("FID_CAT: "+t);var n=new gen.ajax(""),i=sa.dataSA($("html").attr("data-sa")),r={};r.FID_CAT=t,r.exclude=$("#record").attr("data-exclude"),r.ID=$('input[name="ID"]').val(),r.title=$("#record>option").eq(0).text();var o="VBNE"==i.application?"admin/ajax/"+e.name+"/get_record_selector":i.application+"/admin/ajax/"+e.name+"/get_record_selector";n.get({url:o,data:r,callback:"admin.get_record_selector_callback"})},get_record_selector_callback:function(e){return parseInt(e.meta.error,10)<0?void("on"==debug&&window.console.error(JSON.stringify(e))):void $("#record").html(e.html)},update_image_selector:function(e){return parseInt(e.meta.error,10)<0?void("on"==debug&&window.console.error(JSON.stringify(e))):($("#image_selector").html(e.html),form.data.load_named_objects($("#images")),$("#popup_image_move select").val(e.dir),$("#popup_image_move select option").removeAttr("selected"),void $('#popup_image_move select option[value="'+e.dir+'"]').attr("selected","selected"))}},debug="on",show="on",no_redirect="off",tan=200;